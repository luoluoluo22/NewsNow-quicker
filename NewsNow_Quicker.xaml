<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:qk="https://getquicker.net"
        Width="1200"
        Height="800"
        Title="NewsNow"
        Background="#121212"
        mc:Ignorable="d">
  <Window.Resources>
    <!-- 头部导航按钮样式 -->
    <Style x:Key="NavButton" TargetType="Button">
      <Setter Property="Margin" Value="8,0" />
      <Setter Property="Padding" Value="12,6" />
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Cursor" Value="Hand" />
      <Setter Property="FontSize" Value="14" />
      <Setter Property="Foreground" Value="#94A3B8" />
      <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Foreground" Value="#F1F5F9"/>
        </Trigger>
      </Style.Triggers>
    </Style>

    <!-- 新闻卡片样式 -->
    <Style x:Key="NewsCard" TargetType="Border">
      <Setter Property="Margin" Value="4" />
      <Setter Property="Background" Value="#1E1E1E" />
      <Setter Property="CornerRadius" Value="8" />
      <Setter Property="Width" Value="360" />
      <Setter Property="Height" Value="400" />
    </Style>

    <!-- 新闻条目样式 -->
    <Style x:Key="NewsItemStyle" TargetType="Border">
      <Setter Property="Padding" Value="16,12"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Margin" Value="0,0,0,8"/>
      <Setter Property="Background" Value="#1E293B"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Background" Value="#2A2A2A"/>
        </Trigger>
      </Style.Triggers>
    </Style>

    <!-- 卡片标题样式 -->
    <Style x:Key="CardTitle" TargetType="TextBlock">
      <Setter Property="Foreground" Value="White" />
      <Setter Property="FontSize" Value="16" />
      <Setter Property="FontWeight" Value="SemiBold" />
      <Setter Property="Margin" Value="16,12" />
    </Style>

    <!-- 新闻项目DataTemplate -->
    <DataTemplate x:Key="NewsItemTemplate">
      <Border Style="{StaticResource NewsItemStyle}"
              Tag="{Binding Url}"
              qk:Att.Action="openUrl=true">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>
          
          <TextBlock Grid.Column="0"
                   Text="{Binding Title}"
                   Foreground="White"
                   TextWrapping="Wrap"
                   FontSize="14"/>
          
          <TextBlock Grid.Column="1"
                   Text="{Binding Time}"
                   Foreground="#666666"
                   FontSize="12"
                   VerticalAlignment="Center"
                   Margin="12,0,0,0"/>
        </Grid>
      </Border>
    </DataTemplate>
  </Window.Resources>
  
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    
    <!-- 顶部导航栏 -->
    <Grid Grid.Row="0" Background="#1A1A1A">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>
      
      <!-- Logo和标题 -->
      <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="20,15">
        <Border Width="40" Height="40" Background="#E11D48" CornerRadius="8">
          <TextBlock Text="N" FontSize="24" FontWeight="Bold" Foreground="White" 
                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Border>
        <TextBlock Text="NewsNow" FontSize="22" FontWeight="Bold" Foreground="White" 
                 VerticalAlignment="Center" Margin="15,0,0,0"/>
      </StackPanel>
      
      <!-- 操作按钮 -->
      <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="20,15">
        <Button x:Name="RefreshButton" Content="刷新" Padding="15,8" Margin="0,0,10,0"
              Background="#3B82F6" Foreground="White" BorderThickness="0">
          <Button.Resources>
            <Style TargetType="Border">
              <Setter Property="CornerRadius" Value="6"/>
            </Style>
          </Button.Resources>
        </Button>
      </StackPanel>
    </Grid>
    
    <!-- 主要内容区域 -->
    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      
      <!-- V2EX新闻列表 -->
      <Grid Grid.Column="0" Margin="20,20,10,20">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- 标题 -->
        <TextBlock Text="V2EX 最新" FontSize="18" FontWeight="Bold" Foreground="#FFFFFF" Margin="0,0,0,15"/>
        
        <!-- 内容列表 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
          <ItemsControl x:Name="V2exItemsControl" 
                      ItemTemplate="{StaticResource NewsItemTemplate}">
          </ItemsControl>
        </ScrollViewer>
      </Grid>
      
      <!-- 微博热搜列表 -->
      <Grid Grid.Column="1" Margin="10,20,10,20">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- 标题 -->
        <TextBlock Text="微博 热搜" FontSize="18" FontWeight="Bold" Foreground="#FFFFFF" Margin="0,0,0,15"/>
        
        <!-- 内容列表 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
          <ItemsControl x:Name="WeiboItemsControl"
                      ItemTemplate="{StaticResource NewsItemTemplate}">
          </ItemsControl>
        </ScrollViewer>
      </Grid>
      
      <!-- IT之家新闻列表 -->
      <Grid Grid.Column="2" Margin="10,20,20,20">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- 标题 -->
        <TextBlock Text="IT之家 最新" FontSize="18" FontWeight="Bold" Foreground="#FFFFFF" Margin="0,0,0,15"/>
        
        <!-- 内容列表 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
          <ItemsControl x:Name="IthomeItemsControl"
                      ItemTemplate="{StaticResource NewsItemTemplate}">
          </ItemsControl>
        </ScrollViewer>
      </Grid>
    </Grid>
    
    <!-- 底部调试区域 -->
    <Border Grid.Row="2" Background="#1A1A1A" Padding="20,15">
      <Expander Header="调试信息" Foreground="White" IsExpanded="True">
        <StackPanel Margin="0,10,0,0">
          <TextBlock Text="数据项数量：" Foreground="White" FontWeight="Bold"/>
          <TextBlock x:Name="DebugText" Foreground="#AAAAAA" 
                   TextWrapping="Wrap" MaxHeight="100"/>
        </StackPanel>
      </Expander>
    </Border>
  </Grid>
</Window> 